"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[988],{2988:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var s=t(79),l=t(4402),n=t(3872),i=t(9724),o=t(5827),r=t(7019),d=t(1372),c=t(5477),u=t(8526),m=t(2080),p=t(5250);const{RangePicker:h}=i.Z,b=(e,a)=>{switch(e){case"radio":return(0,p.jsx)(o.ZP.Group,{options:a.options,optionType:"button",buttonStyle:"solid",disabled:a.disable});case"checkbox":return(0,p.jsx)(r.Z.Group,{style:{width:"100%"},options:a.options});case"node":return a.rightNode;case"switch":return(0,p.jsx)(d.Z,{size:"small",disabled:a.disable});case"input":return(0,p.jsx)(c.Z,{placeholder:a.placeholder,disabled:a.disable});case"numberInput":return(0,p.jsx)(u.Z,{className:"w-full",placeholder:a.placeholder,disabled:a.disable});case"select":return(0,p.jsx)(m.Z,{mode:a.mode,allowClear:!0,placeholder:a.placeholder,disabled:a.disable,options:a.options,className:"min-w-[150px]"});case"rangePick":return(0,p.jsx)(h,{disabled:a.disable,showTime:a.showTime,placeholder:["开始时间","结束时间"]});case"datePick":return(0,p.jsx)(i.Z,{disabled:a.disable,showTime:a.showTime});case"textArea":return(0,p.jsx)(c.Z.TextArea,{placeholder:a.placeholder,disabled:a.disable,showCount:!0,maxLength:a.maxLength||500,className:"mb-6 h-32"})}};var x=t(6372),g=t.n(x);const y=({searchBtn:e=!0,filterInfo:a,initialValues:t,reset:i,loading:o,compact:r=!1,className:d,onSubmit:c,onForm:u,onValuesChange:m})=>{const[h]=l.Z.useForm();return(0,s.useEffect)((()=>{t?h.setFieldsValue(t):a.forEach((e=>{void 0!==e.initialValue&&null!==e.initialValue&&h.setFieldValue(e.name,e.initialValue)}))}),[a,h]),(0,s.useEffect)((()=>{u&&u(h)}),[]),(0,p.jsx)("div",{className:g()("box-border rounded-md bg-white p-6",d),children:(0,p.jsxs)(l.Z,{form:h,colon:!1,layout:"inline",style:{paddingRight:200,position:"relative"},onFinish:e=>{c&&c(e)},onValuesChange:m,children:[a.map((e=>e.hide?null:"blockNode"===e.type?(0,p.jsx)("span",{children:e.label},"string"==typeof e.name?e.name:e.name.join("_")):(0,p.jsx)(l.Z.Item,{name:e.name,label:e.label,valuePropName:"switch"===e.type?"checked":"value",children:b(e.type,e)},"string"==typeof e.name?e.name:e.name.join("_")))),e&&(0,p.jsxs)("div",{className:r?"":"absolute bottom-0 right-10",children:[i?(0,p.jsx)(n.ZP,{htmlType:"reset",children:"清空"}):null,(0,p.jsx)(n.ZP,{htmlType:"submit",type:"primary",loading:o,className:"ml-6",children:"查询"})]})]})})},j=(0,s.memo)(y);var f=t(609);const Z=({open:e,title:a,editInfo:t,noFooter:n,maskClosable:i=!0,initialValues:o,onOk:r,onForm:d,onCancel:c,onValuesChange:u})=>{const[m]=l.Z.useForm();return(0,s.useEffect)((()=>{e&&t.length&&(o?m.setFieldsValue(o):t.forEach((e=>{e.initialValue&&m.setFieldValue(e.name,e.initialValue)})))}),[e,o,m,t]),(0,s.useEffect)((()=>{d&&d(m)}),[]),(0,p.jsx)(f.Z,{open:e,title:a,okText:"确定",cancelText:"取消",width:880,closable:!!n,destroyOnClose:!0,maskClosable:i,onCancel:c,onOk:()=>{m.submit()},afterClose:()=>{m.resetFields()},footer:n?null:void 0,children:(0,p.jsx)("div",{className:"pt-6",children:(0,p.jsx)(l.Z,{form:m,labelCol:{span:5},labelAlign:"right",onFinish:r,onValuesChange:u,children:t.map((e=>e.hide?null:"blockNode"===e.type?(0,p.jsx)("span",{children:e.label},"string"==typeof e.name?e.name:e.name.join("_")):(0,p.jsx)(l.Z.Item,{name:e.name,label:e.label,rules:[e.rule],valuePropName:"switch"===e.type?"checked":"value",wrapperCol:{span:"select"===e.type?8:12},initialValue:"radio"===e.type?e.options?.[0].value:void 0,children:b(e.type,e)},"string"==typeof e.name?e.name:e.name.join("_"))))})})})},v=(0,s.memo)(Z);var k=t(7150),C=t(7414),w=t(5302),V=t(3151),N=t(2463);const P=e=>N.ZP.send("/company/list","get",e);var I=t(4716);const F=[{name:"projectName",type:"input",label:"厂商名称"}],T=[{name:"category",label:"类型",type:"radio",rule:{required:!0,message:"请选择厂商类型！"},options:[{label:"研发",value:1},{label:"发行",value:2},{label:"研发一体",value:3}]},{label:"厂商名称",name:"name",type:"input",rule:{required:!0,message:"请输入厂商名称！"}},{label:"联系人",name:"contact",type:"input",rule:{required:!0,message:"请输入厂商类型联系人！"}},{label:"联系电话",name:"mobile",type:"input",rule:{required:!0,message:"请输入正确的厂商联系电话！",pattern:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/}}],S=()=>{const[e,a]=(0,s.useState)(!1),[t,l]=(0,s.useState)({}),[i,o]=(0,s.useState)(I.rX),[r,d]=(0,s.useState)(null),{data:c,error:u,loading:m,run:h}=(0,V.Z)(P,{defaultParams:[{...i,...t}],loadingDelay:300});u&&console.error("companyService.list ===> ",u);const b=[{title:"ID",dataIndex:"id"},{title:"类型",dataIndex:"category"},{title:"厂商名称",dataIndex:"name"},{title:"联系人",dataIndex:"contact"},{title:"联系电话",dataIndex:"mobile"},{title:"创建时间",dataIndex:"updateTime"},{title:"编辑",key:"edit",render:e=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.ZP,{type:"link",children:"删除"}),(0,p.jsx)(n.ZP,{type:"link",onClick:()=>{a(!0),d(e)},children:"编辑"})]})}];return(0,p.jsxs)("div",{children:[(0,p.jsx)(j,{loading:m,filterInfo:F,onSubmit:e=>{h({...I.rX,...e}),l(e)},reset:!0}),(0,p.jsxs)(C.Z,{className:"mt-3",children:[(0,p.jsx)("div",{children:(0,p.jsx)(n.ZP,{type:"primary",onClick:()=>{a(!0)},children:"新建厂商"})}),(0,p.jsx)(w.Z,{dataSource:c?.data.list,columns:b,rowKey:"id",loading:m})]}),(0,p.jsx)(v,{open:e,title:"厂商编辑",editInfo:T,initialValues:r,onCancel:()=>{a(!1),d(null)},onOk:e=>{(async e=>{try{await(e=>N.ZP.send("/company/insert","post",e,{headers:{"Content-Type":"application/json"}}))(e)}catch(e){k.Z.error({message:"companyService.insert ===> "+e.message})}a(!1)})(e)}})]})}},2463:(e,a,t)=>{t.d(a,{ZP:()=>n});var s=t(3785),l=t(7150);const n=new class{baseConfig={baseURL:"",timeout:3e4};constructor(e){this.instance=s.Z.create(Object.assign(this.baseConfig,e)),this.instance.interceptors.request.use((e=>e)),this.instance.interceptors.response.use((e=>e.data),(e=>(console.error("请求异常 ===> ",e.message),l.Z.error({message:`请求异常 ===> ${e.message}`}),{code:911,data:{}})))}send(e,a="get",t,s){const l={...s};return l.url=e,l.method=a,"get"===a.toLocaleLowerCase()?l.params=t:l.data=t,this.instance.request(l)}}({})}}]);