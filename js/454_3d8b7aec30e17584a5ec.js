"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[454],{9454:(e,a,t)=>{t.r(a),t.d(a,{default:()=>B});var s=t(8318),l=t(3159),n=t(3698),o=t.n(n),r=t(7308),i=t(3109),d=t(5800),c=t(5698),u=t(7712),m=t(5293),p=t(1767),h=t(288),b=t(9214);const{RangePicker:y}=i.A,x=(e,a)=>{switch(e){case"radio":return(0,b.jsx)(d.Ay.Group,{options:a.options||[],optionType:a.optionType||"button",buttonStyle:"solid",disabled:a.disable,...a.otherOptions});case"checkbox":return(0,b.jsx)(c.A.Group,{style:{width:"100%"},options:a.options||[],...a.otherOptions});case"node":return a.rightNode;case"switch":return(0,b.jsx)(u.A,{size:"small",disabled:a.disable,...a.otherOptions});case"input":return(0,b.jsx)(m.A,{placeholder:a.placeholder,disabled:a.disable,...a.otherOptions});case"numberInput":return(0,b.jsx)(p.A,{className:"w-full",placeholder:a.placeholder,disabled:a.disable,...a.otherOptions});case"select":return(0,b.jsx)(h.A,{showSearch:!0,allowClear:!0,mode:a.mode,placeholder:a.placeholder,disabled:a.disable,options:a.options,className:"min-w-[150px]",filterOption:(e,a)=>a.label.includes(e),...a.otherOptions});case"rangePick":return(0,b.jsx)(y,{disabled:a.disable,showTime:a.showTime,placeholder:["开始时间","结束时间"],...a.otherOptions});case"datePick":return(0,b.jsx)(i.A,{disabled:a.disable,showTime:a.showTime,...a.otherOptions});case"textArea":return(0,b.jsx)(m.A.TextArea,{placeholder:a.placeholder,disabled:a.disable,showCount:!0,maxLength:a.maxLength||500,className:"mb-6 h-32",...a.otherOptions})}},g=({style:e,colon:a,layout:t,searchBtn:n,submitBtn:o=!0,submitNode:i,itemInfo:d,className:c,labelCol:u,wrapperCol:m,initialValues:p,onOk:h,onForm:y,onValuesChange:g})=>{const[j]=r.A.useForm();return(0,s.useEffect)((()=>{y&&y(j),p?j.setFieldsValue(p):d.forEach((e=>{void 0!==e.initialValue&&null!==e.initialValue&&j.setFieldValue(e.name,e.initialValue)}))}),[]),(0,b.jsx)("div",{className:c,children:(0,b.jsxs)(r.A,{form:j,style:e,labelCol:u?{span:u}:void 0,wrapperCol:m?{span:m}:void 0,labelAlign:"right",colon:a,layout:t,onFinish:e=>{h&&h(e)},onValuesChange:g,children:[d.map((e=>e.hide?null:"blockNode"===e.type?(0,b.jsx)("span",{children:e.label},"string"==typeof e.name?e.name:e.name.join("_")):(0,b.jsx)(r.A.Item,{name:e.name,label:e.label,extra:e.extra,rules:[e.rule],valuePropName:"switch"===e.type?"checked":"value",initialValue:"radio"===e.type?e.options?.[0].value:void 0,children:x(e.type,e)},"string"==typeof e.name?e.name:e.name.join("_")))),n,o?i||(0,b.jsx)(l.Ay,{htmlType:"submit",type:"primary",block:!0,children:"保存"}):null]})})},j=(0,s.memo)(g),A=({searchBtn:e=!0,filterInfo:a,initialValues:t,reset:n,loading:r,compact:i=!1,className:d,onSubmit:c,onForm:u,onValuesChange:m})=>{const p=(0,s.useRef)(null);return(0,b.jsx)("div",{className:o()("box-border rounded-md bg-white p-6 dark:border dark:border-dark_border dark:bg-dark_bg",d),children:(0,b.jsx)(j,{layout:"inline",colon:!1,submitBtn:!1,className:"relative",itemInfo:a,initialValues:t,searchBtn:e?(0,b.jsxs)("div",{className:i?"ml-10":"absolute bottom-0 right-0",children:[n?(0,b.jsx)(l.Ay,{htmlType:"reset",children:"重置"}):null,(0,b.jsx)(l.Ay,{htmlType:"submit",type:"primary",loading:r,className:"ml-6",children:"查询"})]}):null,onOk:c,onForm:e=>{p.current=e,u&&u(e)},onValuesChange:m})})},C=(0,s.memo)(A);var k=t(9259);const f=({open:e,title:a,noFooter:t,maskClosable:l=!0,onCancel:n,editInfo:o,wrapperCol:r=12,labelCol:i=5,initialValues:d,onOk:c,onForm:u,onValuesChange:m})=>{const p=(0,s.useRef)(null);return(0,b.jsx)(k.A,{open:e,title:a,okText:"确定",cancelText:"取消",width:880,destroyOnClose:!0,closable:!!t,maskClosable:l,onCancel:n,onOk:()=>{p.current&&p.current.submit()},afterClose:()=>{p.current&&p.current.resetFields()},footer:t?null:void 0,children:(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsx)(j,{submitBtn:!1,itemInfo:o,labelCol:i,wrapperCol:r,initialValues:d,onOk:c,onForm:e=>{p.current=e,u&&u(e)},onValuesChange:m})})})},v=(0,s.memo)(f);var w=t(8548),N=t(3068),O=t(8813),V=t(9378),I=t(4260);const T=e=>I.Ay.send("/company/list","get",e);var F=t(5479);const S=[{name:"projectName",type:"input",label:"厂商名称"}],q=[{name:"category",label:"类型",type:"radio",rule:{required:!0,message:"请选择厂商类型！"},options:[{label:"研发",value:1},{label:"发行",value:2},{label:"研发一体",value:3}]},{label:"厂商名称",name:"name",type:"input",rule:{required:!0,message:"请输入厂商名称！"}},{label:"联系人",name:"contact",type:"input",rule:{required:!0,message:"请输入厂商类型联系人！"}},{label:"联系电话",name:"mobile",type:"input",rule:{required:!0,message:"请输入正确的厂商联系电话！",pattern:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/}}],B=()=>{const[e,a]=(0,s.useState)(!1),[t,n]=(0,s.useState)({}),[o,r]=(0,s.useState)(F.Hv),[i,d]=(0,s.useState)(null),{data:c,error:u,loading:m,run:p}=(0,V.A)(T,{defaultParams:[{...o,...t}],loadingDelay:300});u&&console.error("companyService.list ===> ",u);const h=[{title:"ID",dataIndex:"id"},{title:"类型",dataIndex:"category"},{title:"厂商名称",dataIndex:"name"},{title:"联系人",dataIndex:"contact"},{title:"联系电话",dataIndex:"mobile"},{title:"创建时间",dataIndex:"updateTime"},{title:"编辑",key:"edit",render:e=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Ay,{type:"link",children:"删除"}),(0,b.jsx)(l.Ay,{type:"link",onClick:()=>{a(!0),d(e)},children:"编辑"})]})}];return(0,b.jsxs)("div",{children:[(0,b.jsx)(C,{loading:m,filterInfo:S,onSubmit:e=>{p({...F.Hv,...e}),n(e)},reset:!0}),(0,b.jsxs)(N.A,{className:"mt-3",children:[(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)(l.Ay,{type:"primary",onClick:()=>{a(!0)},children:"新建厂商"})}),(0,b.jsx)(O.A,{dataSource:c?.data.list,columns:h,rowKey:"id",loading:m})]}),(0,b.jsx)(v,{open:e,title:"厂商编辑",editInfo:q,initialValues:i,onCancel:()=>{a(!1),d(null)},onOk:e=>{(async e=>{try{await(e=>I.Ay.send("/company/insert","post",e,{headers:{"Content-Type":"application/json"}}))(e)}catch(e){w.Ay.error({message:"companyService.insert ===> "+e.message})}a(!1)})(e)}})]})}},4260:(e,a,t)=>{t.d(a,{Ay:()=>n});var s=t(7527),l=t(8548);const n=new class{baseConfig={baseURL:"",timeout:3e4};constructor(e){this.instance=s.A.create(Object.assign(this.baseConfig,e)),this.instance.interceptors.request.use((e=>e)),this.instance.interceptors.response.use((e=>e.data),(e=>(console.error("请求异常 ===> ",e.message),l.Ay.error({message:`请求异常 ===> ${e.message}`}),{code:911,data:{}})))}send(e,a="get",t,s){const l={...s};return l.url=e,l.method=a,"get"===a.toLocaleLowerCase()?l.params=t:l.data=t,this.instance.request(l)}}({})}}]);