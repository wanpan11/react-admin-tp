"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[988],{2988:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var l=t(79),s=t(4402),n=t(3872),i=t(7414),r=t(9724),o=t(5827),d=t(1372),c=t(5477),u=t(8526),m=t(2080),p=t(5250);const{RangePicker:h}=r.Z,b=(e,a)=>{switch(e){case"radio":return(0,p.jsx)(o.ZP.Group,{options:a.options,optionType:"button",buttonStyle:"solid",disabled:a.disable});case"node":return a.rightNode;case"switch":return(0,p.jsx)(d.Z,{disabled:a.disable});case"input":return(0,p.jsx)(c.Z,{placeholder:a.placeholder,disabled:a.disable});case"numberInput":return(0,p.jsx)(u.Z,{placeholder:a.placeholder,disabled:a.disable});case"select":return(0,p.jsx)(m.Z,{mode:a.mode,allowClear:!0,placeholder:a.placeholder,disabled:a.disable,options:a.options,className:"min-h-[150px]"});case"rangePick":return(0,p.jsx)(h,{disabled:a.disable,placeholder:["开始时间","结束时间"]});case"datePick":return(0,p.jsx)(r.Z,{disabled:a.disable,showTime:a.showTime});case"textArea":return(0,p.jsx)(c.Z.TextArea,{placeholder:a.placeholder,disabled:a.disable,showCount:!0,maxLength:a.maxLength||500,className:"mb-6 h-32"})}},x=({reset:e,loading:a,compact:t=!1,onSubmit:r,filterInfo:o,initialValues:d})=>{const[c]=s.Z.useForm();return(0,l.useEffect)((()=>{d&&c.setFieldsValue(d)}),[]),(0,p.jsx)(i.Z,{children:(0,p.jsxs)(s.Z,{form:c,colon:!1,layout:"inline",onFinish:e=>{r&&r(e)},className:"relative pr-52",children:[o.length>0?o.map((e=>(0,p.jsx)(s.Z.Item,{name:e.name,label:e.label,children:b(e.type,e)},e.name))):null,(0,p.jsxs)("div",{className:t?"":"absolute bottom-0 right-6",children:[e?(0,p.jsx)(n.ZP,{htmlType:"reset",children:"重置"}):null,(0,p.jsx)(n.ZP,{type:"primary",className:"ml-6",htmlType:"submit",loading:a,children:"查询"})]})]})})},g=(0,l.memo)(x);var y=t(609);const j=({open:e,title:a,editInfo:t,initialValues:n,onCancel:i,onOk:r,noFooter:o})=>{const[d]=s.Z.useForm();return(0,l.useEffect)((()=>{e&&t.length&&(n?d.setFieldsValue(n):t.forEach((e=>{e.initialValue&&d.setFieldValue(e.name,e.initialValue)})))}),[e,n,d,t]),(0,p.jsx)(y.Z,{open:e,title:a,okText:"确定",cancelText:"取消",width:800,closable:!!o,destroyOnClose:!0,maskClosable:!1,onCancel:i,onOk:()=>{d.submit()},afterClose:()=>{d.resetFields()},footer:o?null:void 0,children:(0,p.jsx)("div",{className:"min-h-[300px] p-8 pl-0 pr-0",children:(0,p.jsx)(s.Z,{form:d,labelCol:{span:5},labelAlign:"right",onFinish:r,children:t.map((e=>e.hide?null:"blockNode"===e.type?(0,p.jsxs)("span",{children:[" ",e.label," "]},e.name):(0,p.jsx)(s.Z.Item,{wrapperCol:{span:"select"===e.type?8:12},name:e.name,label:e.label,rules:[e.rule],extra:e.extra,initialValue:"radio"===e.type?e.options?.[0].value:void 0,children:b(e.type,e)},e.name)))})})})},Z=(0,l.memo)(j);var f=t(7150),k=t(664),v=t(3151),C=t(2463);const w=e=>C.ZP.send("/company/list","get",e);var I=t(4716);const P=[{name:"projectName",type:"input",label:"厂商名称"}],F=[{name:"category",label:"类型",type:"radio",rule:{required:!0,message:"请选择厂商类型！"},options:[{label:"研发",value:1},{label:"发行",value:2},{label:"研发一体",value:3}]},{label:"厂商名称",name:"name",type:"input",rule:{required:!0,message:"请输入厂商名称！"}},{label:"联系人",name:"contact",type:"input",rule:{required:!0,message:"请输入厂商类型联系人！"}},{label:"联系电话",name:"mobile",type:"input",rule:{required:!0,message:"请输入正确的厂商联系电话！",pattern:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/}}],N=()=>{const[e,a]=(0,l.useState)(!1),[t,s]=(0,l.useState)({}),[r,o]=(0,l.useState)(I.rX),[d,c]=(0,l.useState)(null),{data:u,error:m,loading:h,run:b}=(0,v.Z)(w,{defaultParams:[{...r,...t}],loadingDelay:300});m&&console.error("companyService.list ===> ",m);const x=[{title:"ID",dataIndex:"id"},{title:"类型",dataIndex:"category"},{title:"厂商名称",dataIndex:"name"},{title:"联系人",dataIndex:"contact"},{title:"联系电话",dataIndex:"mobile"},{title:"创建时间",dataIndex:"updateTime"},{title:"编辑",key:"edit",render:e=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.ZP,{type:"link",children:"删除"}),(0,p.jsx)(n.ZP,{type:"link",onClick:()=>{a(!0),c(e)},children:"编辑"})]})}];return(0,p.jsxs)("div",{children:[(0,p.jsx)(g,{loading:h,filterInfo:P,onSubmit:e=>{b({...I.rX,...e}),s(e)},reset:!0}),(0,p.jsxs)(i.Z,{className:"mt-3",children:[(0,p.jsx)("div",{children:(0,p.jsx)(n.ZP,{type:"primary",onClick:()=>{a(!0)},children:"新建厂商"})}),(0,p.jsx)(k.Z,{dataSource:u?.data.list,columns:x,rowKey:"id",loading:h})]}),(0,p.jsx)(Z,{open:e,title:"厂商编辑",editInfo:F,initialValues:d,onCancel:()=>{a(!1),c(null)},onOk:e=>{(async e=>{try{await(e=>C.ZP.send("/company/insert","post",e,{headers:{"Content-Type":"application/json"}}))(e)}catch(e){f.Z.error({message:"companyService.insert ===> "+e.message})}a(!1)})(e)}})]})}},2463:(e,a,t)=>{t.d(a,{ZP:()=>n});var l=t(3785),s=t(7150);const n=new class{baseConfig={baseURL:"",timeout:3e4};constructor(e){this.instance=l.Z.create(Object.assign(this.baseConfig,e)),this.instance.interceptors.request.use((e=>e)),this.instance.interceptors.response.use((e=>e.data),(e=>(console.error("请求异常 ===> ",e.message),s.Z.error({message:`请求异常 ===> ${e.message}`}),{code:911,data:{}})))}send(e,a="get",t,l){const s={...l};return s.url=e,s.method=a,"get"===a.toLocaleLowerCase()?s.params=t:s.data=t,this.instance.request(s)}}({})}}]);