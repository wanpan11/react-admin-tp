"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[617],{2617:(e,n,t)=>{t.r(n),t.d(n,{default:()=>E});var r=t(1470),c=t(7231),i=(t(5036),t(7698),t(90),t(1127),t(7766),t(2349),t(8633),t(7528),t(6067),t(882),t(4762),t(1172),t(887),t(3699),t(2947),t(79)),s=t(8825),l=t(3772),o=t(9006),a=t(9617),u=(t(8003),t(5199),t(5491),t(6372)),d=t.n(u),h=t(5250),v=function(e){var n=e.routerMap,t=void 0===n?{}:n,r=(0,l.TH)().pathname,c=(0,l.s0)(),s=t[Object.keys(t).find((function(e){return e.startsWith(r)}))||""],o=(0,i.useMemo)((function(){var e={};return Object.keys(t).map((function(n){var r=t[n].split("/");e[r[r.length-1].trim()]=n})),e}),[t]);return(0,h.jsx)("div",{className:"flex h-14 items-center text-neutral-400",children:s.split("/").map((function(e,n,t){var r=e.trim(),i=t.length-1===n,s=o[r];return(0,h.jsxs)("span",{children:[(0,h.jsx)("span",{className:d()({"cursor-pointer text-primary":!i&&s}),onClick:function(){c(s)},children:r}),i?null:(0,h.jsx)("span",{className:"ml-2 mr-2",children:"/"})]},e)}))})};const m=(0,i.memo)(v);var f=t(6942),p=(0,i.createContext)({isLogin:f.Z.isLogin,userInfo:f.Z.userInfo});p.displayName="MobxContext";const j=p;var x=t(4716),g=t(5323),b=t(7191),y=t(6187);var k=s.Z.Header;const O=(0,a.Pi)((function(e){var n,t=e.tabId,c=e.tabList,i=(0,l.s0)(),s=[{key:"1",label:(0,h.jsx)("div",{className:"p-3 pb-1 pt-1",onClick:function(){localStorage.clear(),f.Z.setLogin(!1),i("/login")},children:"退出登录"})}];return(0,h.jsxs)(k,{className:"BBocqG8ga8REKXScIPgO",children:[(0,h.jsxs)("div",{className:"ja9HtPYs2pWHDtUwExiV",children:[(0,h.jsxs)("h1",{className:"OzUSkI_K7wZkE6azDnJr",children:[(0,h.jsx)("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg",alt:"logo"}),"管理系统"]}),c.map((function(e){return(0,h.jsxs)("div",{className:d()("r6PsesT1Swk8B0YJFYCP",(0,r.Z)({},"KbmCdHtUH4JIgWrPTlto",e.key===t)),children:[(0,h.jsx)("div",{onClick:function(){var n;n=e.path,i(n)},children:e.label}),(0,h.jsx)("div",{className:"Ir3LKO1ONJpH8AzpilYv"})]},e.key)}))]}),(0,h.jsx)("div",{className:"Plb73jE99IZSQ0M8LYaH",children:(0,h.jsx)(g.Z,{menu:{items:s},placement:"bottomRight",arrow:{pointAtCenter:!1},children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("span",{className:"mr-3",children:null===(n=f.Z.userInfo)||void 0===n?void 0:n.account}),(0,h.jsx)(b.C,{icon:(0,h.jsx)(y.Z,{})})]})})})]})}));var Z=t(3121),N=s.Z.Sider;const P=function(e){var n=e.menu,t=e.selectKey,r=(0,i.useState)([]),s=(0,c.Z)(r,2),l=s[0],o=s[1],a=(0,i.useMemo)((function(){var e;return t||(n[0].children?null===(e=n[0].children[0])||void 0===e?void 0:e.key:n[0].key)}),[n,t]);return(0,i.useEffect)((function(){var e=[];n.forEach((function(n){var t;null!==(t=n.children)&&void 0!==t&&t.length&&e.push("".concat(n.key))})),o(e)}),[n]),(0,h.jsx)(N,{theme:"light",width:160,children:(0,h.jsx)(Z.Z,{mode:"inline",items:n,openKeys:l,selectedKeys:["".concat(a)],className:"mt-5",onOpenChange:function(e){o(e)}})})};function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I=s.Z.Content;const M=(0,a.Pi)((function(e){var n=e.children,t=(0,l.TH)().pathname,r=(0,l.s0)(),a=f.Z.isLogin,u=f.Z.userInfo,d=f.Z.routerMap,v=f.Z.getRouteMenu.menu,p=(0,i.useMemo)((function(){var e,n,r;if(!v.length)return["",""];var c="",i="";return function e(n,r){n.length<0||n.forEach((function(n){var s,l;t.includes(n.path)&&(i=r||"".concat(n.key),null!==(l=n.children)&&void 0!==l&&l.length||(c=r?"".concat(n.key):""));var o="";null!==(s=n.children)&&void 0!==s&&s.length&&(o="".concat(r?r+x.Q5+n.key:n.key),e(n.children,o))}))}(v),[(null===(e=i)||void 0===e||null===(n=e.split(x.Q5))||void 0===n?void 0:n[0])||"".concat(null===(r=v[0])||void 0===r?void 0:r.key),"".concat(c)]}),[t,v]),g=(0,c.Z)(p,2),b=g[0],y=g[1],k=(0,i.useMemo)((function(){var e,n;return b?function e(n){return n.map((function(n){var t=n.path,r=n.children;return C(C({},n),{},{label:null!=r&&r.length?n.label:(0,h.jsxs)(o.rU,{to:t,children:[" ",n.label]}),children:null!=r&&r.length?e(r):void 0})}))}((null===(e=v.filter((function(e){return e.key===b})))||void 0===e||null===(n=e[0])||void 0===n?void 0:n.children)||[]):[]}),[b,v]);return(0,i.useEffect)((function(){a||r("/login")}),[a,r]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(O,{tabId:b,tabList:v}),(0,h.jsxs)(s.Z,{className:"h-[calc(100vh-58px)] overflow-hidden",children:[k.length?(0,h.jsx)(P,{selectKey:y,menu:k}):null,(0,h.jsx)(s.Z,{children:(0,h.jsxs)(I,{className:"m-3 mb-0 mt-0",children:[(0,h.jsx)(m,{routerMap:d}),(0,h.jsx)("div",{className:"h-[calc(100%-4.5rem)] overflow-auto",children:(0,h.jsx)(j.Provider,{value:{isLogin:a,userInfo:u},children:n})})]})})]})]})})),E=function(e){var n=e.children;return(0,h.jsx)(M,{children:n})}}}]);